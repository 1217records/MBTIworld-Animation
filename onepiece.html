<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>원피스 MBTI 테스트</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Sora:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --ink: #151619;
        --muted: #5f6270;
        --surface: #ffffff;
        --canvas: #f2f6fb;
        --border: #dbe4f1;
        --accent: #1f4d8f;
        --shadow: 0 18px 35px rgba(17, 24, 39, 0.12);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: "Noto Sans KR", sans-serif;
        color: var(--ink);
        background: var(--canvas);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 48px 24px;
      }

      .wrap {
        width: min(900px, 100%);
        background: var(--surface);
        border-radius: 24px;
        padding: 40px clamp(20px, 4vw, 48px);
        box-shadow: var(--shadow);
        border: 1px solid rgba(17, 24, 39, 0.06);
      }

      header {
        display: grid;
        gap: 8px;
        margin-bottom: 28px;
      }

      h1 {
        margin: 0;
        font-family: "Sora", sans-serif;
        font-size: clamp(24px, 3vw, 34px);
      }

      .subtitle {
        margin: 0;
        color: var(--muted);
        font-size: 14px;
      }

      form {
        display: grid;
        gap: 18px;
      }

      .progress {
        width: 100%;
        height: 8px;
        border-radius: 999px;
        background: #e7edf7;
        overflow: hidden;
      }

      .progress-bar {
        height: 100%;
        width: 0;
        background: linear-gradient(90deg, #1f4d8f, #5fa7ff);
        transition: width 0.3s ease;
      }

      .question {
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 18px;
        display: grid;
        gap: 14px;
        background: #fff;
      }

      .question-meta {
        font-size: 12px;
        color: var(--muted);
      }

      .question h2 {
        margin: 0;
        font-size: 18px;
        font-weight: 600;
      }

      .options {
        display: grid;
        gap: 10px;
      }

      label {
        display: flex;
        gap: 8px;
        align-items: center;
        padding: 12px 14px;
        border-radius: 12px;
        border: 1px solid transparent;
        background: #f8fafc;
        cursor: pointer;
        transition: border-color 0.2s ease, background 0.2s ease;
      }

      input[type="radio"] {
        accent-color: var(--accent);
      }

      input[type="radio"]:checked + span {
        font-weight: 600;
      }

      label:has(input[type="radio"]:checked) {
        border-color: rgba(31, 77, 143, 0.4);
        background: #edf3fb;
      }

      .controls {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }

      button {
        border: 0;
        border-radius: 999px;
        padding: 12px 20px;
        background: var(--accent);
        color: #fff;
        font-weight: 600;
        cursor: pointer;
      }

      button.secondary {
        background: #fff;
        color: var(--accent);
        border: 1px solid rgba(31, 77, 143, 0.35);
      }

      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .meta {
        margin-top: 12px;
        font-size: 12px;
        color: var(--muted);
      }

      .back {
        display: inline-block;
        margin-top: 18px;
        font-size: 13px;
        color: var(--muted);
        text-decoration: none;
      }

      .back:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <main class="wrap">
      <header>
        <h1>원피스 MBTI 테스트</h1>
        <p class="subtitle">16문항으로 원피스 에피소드 상황을 풀어 MBTI를 계산합니다.</p>
      </header>

      <form id="test-form">
        <div class="progress" aria-hidden="true">
          <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="question">
          <div class="question-meta" id="question-meta">1/16</div>
          <h2 id="question-title">질문을 불러오는 중…</h2>
          <div class="options" id="options"></div>
        </div>
        <div class="controls">
          <button type="button" class="secondary" id="prev-btn">이전</button>
          <button type="button" id="next-btn">다음</button>
        </div>
      </form>

      <p class="meta">각 문항에서 선택 후 다음으로 이동해 주세요.</p>
      <a class="back" href="index.html">← 테스트 목록으로</a>
    </main>

    <script>
      const questions = [
        {
          axis: "SN",
          prompt: "1. 스카이피아에 오르기 전, 하늘섬 길을 찾는다면?",
          options: [
            { value: "S", label: "나침반·기록지침 기준으로 검증된 루트를 따른다" },
            { value: "N", label: "구름의 흐름과 바람을 보고 새로운 길을 추론한다" },
          ],
        },
        {
          axis: "EI",
          prompt: "2. 워터 세븐에서 동료 사이 갈등이 터졌다면?",
          options: [
            { value: "E", label: "직접 나서서 대화의 장을 만들고 분위기를 정리한다" },
            { value: "I", label: "흐름을 지켜본 뒤 핵심만 정리해 전달한다" },
          ],
        },
        {
          axis: "TF",
          prompt: "3. 에니에스 로비 돌입을 결정해야 한다면?",
          options: [
            { value: "T", label: "성공 확률과 전력 배치를 계산해 판단한다" },
            { value: "F", label: "동료의 마음과 약속을 최우선으로 본다" },
          ],
        },
        {
          axis: "JP",
          prompt: "4. 드레스로자 이후 항로를 정할 때 나는?",
          options: [
            { value: "J", label: "정해진 플랜에 맞춰 일정을 확정한다" },
            { value: "P", label: "현장 기회에 따라 유연하게 바꾼다" },
          ],
        },
        {
          axis: "SN",
          prompt: "5. 포네그리프 해석이 막힐 때?",
          options: [
            { value: "S", label: "문장과 기록을 차근차근 재정리한다" },
            { value: "N", label: "숨은 맥락과 연결고리를 상상해본다" },
          ],
        },
        {
          axis: "EI",
          prompt: "6. 축제 한복판(스카이피아·어인섬)에 도착했다면?",
          options: [
            { value: "E", label: "사람들 속으로 들어가 분위기를 끌어올린다" },
            { value: "I", label: "주변을 관찰하며 필요한 순간에만 참여한다" },
          ],
        },
        {
          axis: "TF",
          prompt: "7. 마린포드급 전장에서 선택을 해야 한다면?",
          options: [
            { value: "T", label: "피해 최소화와 승률을 우선으로 판단한다" },
            { value: "F", label: "의리와 신념을 지키는 결정을 택한다" },
          ],
        },
        {
          axis: "JP",
          prompt: "8. 보급과 식량을 책임진다면?",
          options: [
            { value: "J", label: "리스트를 만들어 계획적으로 채운다" },
            { value: "P", label: "현지 분위기에 맞게 유연하게 조달한다" },
          ],
        },
        {
          axis: "EI",
          prompt: "9. 긴 항해 중 갑판 휴식 시간엔?",
          options: [
            { value: "E", label: "동료들과 게임·노래로 분위기를 끌어올린다" },
            { value: "I", label: "일지를 쓰거나 생각을 정리하며 쉬고 싶다" },
          ],
        },
        {
          axis: "SN",
          prompt: "10. 알라바스타 사막에서 길을 잃었다면?",
          options: [
            { value: "S", label: "지도·수분 보급 루트를 기준으로 이동한다" },
            { value: "N", label: "바람·지형 패턴을 읽고 새로운 길을 떠올린다" },
          ],
        },
        {
          axis: "TF",
          prompt: "11. 동료가 크게 실수했을 때?",
          options: [
            { value: "T", label: "문제 해결에 필요한 행동을 바로 정리한다" },
            { value: "F", label: "감정부터 추슬러 다시 일어날 수 있게 돕는다" },
          ],
        },
        {
          axis: "JP",
          prompt: "12. 와노국에서 목표를 달성해야 한다면?",
          options: [
            { value: "J", label: "단계별 로드맵을 짜서 꾸준히 밀어붙인다" },
            { value: "P", label: "기회가 보일 때 즉흥적으로 움직인다" },
          ],
        },
        {
          axis: "EI",
          prompt: "13. 첫 항해 출항 직전, 나는?",
          options: [
            { value: "E", label: "항구에서 사람들과 바로 어울리며 분위기를 만든다" },
            { value: "I", label: "조용히 역할과 준비물을 점검한다" },
          ],
        },
        {
          axis: "SN",
          prompt: "14. 적의 능력을 분석해야 한다면?",
          options: [
            { value: "S", label: "지금까지 보인 패턴을 정리해 대응한다" },
            { value: "N", label: "아직 드러나지 않은 가능성까지 예측한다" },
          ],
        },
        {
          axis: "TF",
          prompt: "15. 적과 협상 테이블에 앉게 된다면?",
          options: [
            { value: "T", label: "조건과 이득을 계산해 냉정하게 결정한다" },
            { value: "F", label: "상대의 사정과 신뢰를 함께 고려한다" },
          ],
        },
        {
          axis: "JP",
          prompt: "16. 동료들의 역할을 나눈다면?",
          options: [
            { value: "J", label: "명확한 역할을 미리 배정한다" },
            { value: "P", label: "상황에 따라 자연스럽게 분담한다" },
          ],
        },
      ];

      const form = document.getElementById("test-form");
      const optionsEl = document.getElementById("options");
      const questionTitle = document.getElementById("question-title");
      const questionMeta = document.getElementById("question-meta");
      const progressBar = document.getElementById("progress-bar");
      const prevBtn = document.getElementById("prev-btn");
      const nextBtn = document.getElementById("next-btn");

      const answers = Array(questions.length).fill(null);
      let currentIndex = 0;

      const renderQuestion = () => {
        const current = questions[currentIndex];
        questionTitle.textContent = current.prompt;
        questionMeta.textContent = `${currentIndex + 1}/${questions.length}`;
        progressBar.style.width = `${((currentIndex + 1) / questions.length) * 100}%`;

        optionsEl.innerHTML = "";
        current.options.forEach((option, index) => {
          const label = document.createElement("label");
          const input = document.createElement("input");
          input.type = "radio";
          input.name = "current";
          input.value = option.value;
          input.checked = answers[currentIndex] === option.value;
          input.addEventListener("change", () => {
            answers[currentIndex] = option.value;
            nextBtn.disabled = false;
          });

          const span = document.createElement("span");
          span.textContent = option.label;

          label.appendChild(input);
          label.appendChild(span);
          optionsEl.appendChild(label);
        });

        prevBtn.disabled = currentIndex === 0;
        nextBtn.textContent = currentIndex === questions.length - 1 ? "결과 보기" : "다음";
        nextBtn.disabled = answers[currentIndex] === null;
      };

      prevBtn.addEventListener("click", () => {
        if (currentIndex > 0) {
          currentIndex -= 1;
          renderQuestion();
        }
      });

      nextBtn.addEventListener("click", () => {
        if (answers[currentIndex] === null) {
          alert("선택 후 다음으로 이동해 주세요.");
          return;
        }

        if (currentIndex < questions.length - 1) {
          currentIndex += 1;
          renderQuestion();
          return;
        }

        const counts = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
        answers.forEach((value) => {
          counts[value] += 1;
        });

        const type = [
          counts.E >= counts.I ? "E" : "I",
          counts.S >= counts.N ? "S" : "N",
          counts.T >= counts.F ? "T" : "F",
          counts.J >= counts.P ? "J" : "P",
        ].join("");

        window.location.href = `result.html?theme=onepiece&type=${type}`;
      });

      form.addEventListener("submit", (event) => {
        event.preventDefault();
      });

      renderQuestion();
    </script>
  </body>
</html>
